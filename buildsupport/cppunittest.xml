<project name = "cppunittest" default = "cppunittest-exe" basedir= "../">
	<description>
		Builds cppunittest Executable
	</description>

	<property name = "exe-name" value = "cppunittest"/>
	<property name = "cppunittest-build-dir" value = "${cppunittest}/${arch}" />
	<target name = "cppunittest-init">
		<tstamp/>
		<echo>${os.name}</echo>
		<echo>${os.arch}</echo>
	</target>
	
	<target name = "cppunittest-compile" depends = "cppunittest-init">
		<compile-exe-cpp src-dir = "${cppunittest}" src-files = "*.cpp" includes = "-I ${common-includes} -I ${cppunit-includes}"/>
	</target>
	
	<target name = "cppunittest-exe" depends = "common-lib,cppunittest-compile">
		<link-exe 
		 exe-name ="cppunittest" 
		 app-type = "console" 
		 src-dir = "${cppunittest}" 
		 obj-files = "*" 
		 lib-path = "-libpath:${lib} -libpath:${msdev-lib-path} -libpath:${cppunit-lib-path} " 
		 libs = "${common-lib} ${msdev-libs} ${cppunit-libs}"/>
	</target>
	
	<target name = "cppunittest-clean">
		<delete>
			<fileset dir="${cppunittest-build-dir}" includes="*"/>
		</delete>
		<delete file = "${bin}/@{exe-name}.exe"/>
	</target>
</project>
